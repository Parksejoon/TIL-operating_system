# 하드웨어 동기화(Synchronization Hardware)
앞서 말했듯 피터슨의 해결안은 현대의 컴퓨터에서 사용하기 어렵다. 때문에 하드웨에서부터 소프트웨어 기반 API를 포함한 기법을 사용한 해결책을 탐구해보자.
***

## Locking
* 모든 해결책들은 임계구역을 보호하기 위해서 lock을 사용하는 것에 기반을 둔다.
* 임계구역 문제는 단일 처리기 환경에서는 공유 변수가 변경되는 동안 인터럽트 발생을 허용하기 않음으로써 해결할 수 있다.
* 다중 처리기 환경에서는 인터럽트 되지 않는 하나의 단위로서 특별한 하드웨어 명령어들을 제공한다.
    * test_and_set 명령어는 원자적(atomically)으로 실행된다.
        * 동시에 실행되면 임의의 순서로 실행될 것이다.
    * compare_and_swap 명령어는 test_and_set 명령어와 대조적으로 세 개의 피연산자를 받는다.
        * 언제나 value의 원래 값을 반환한다.
        * 마찬가지로 원자적(atomically)으로 실행된다.
    * test_and_set 명령어를 이용한 다른알고리즘이 존재한다.
        * 공용 데이터로 boolean형 배열과 변수를 모두 false로 초기화한다.
        * 프로세스가 임계구역에 진입하는 경우는 해당 인덱스의 배열이 false이던지 test_and_set명령어를 실행했을 때 이다.
* test_and_set이나 compare_and_swap 명령어는 컴퓨터 구조 책에서 자세히 찾아볼 수 있다.
